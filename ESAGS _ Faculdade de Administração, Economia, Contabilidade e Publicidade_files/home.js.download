(function() {
	var BASE_URL = $("body").data("url");
	var mq = window.matchMedia("(max-width: 979px)");
	var mobile = window.matchMedia("(max-width: 767px)");
	var sliderFade = 1;

	setInterval(function() {
		sliderFade++;

		if (sliderFade == 4) {
			sliderFade = 1;
		}

		$("#banner .slider-home").find(".active").removeClass("active").fadeOut(850);
		$("#banner .slider-home").find("[data-slide='" + sliderFade + "']").addClass("active").fadeIn(800);
	}, 13000);

	$("a.lightbox").magnificPopup({
		disableOn: 700,
		type: "iframe",
		preloader: false,
		removalDelay: 500,
		callbacks: {
			beforeOpen: function() {
				this.st.image.markup = this.st.image.markup.replace("mfp-iframe-scaler", "mfp-iframe-scaler mfp-with-anim");
				this.st.mainClass = this.st.el.attr("data-effect");
			}
		},
		closeOnContentClick: true,
		midClick: true,
		fixedContentPos: false,
		closeOnBgClick: false,
	});

	$("#banner .bullets .bullet").click(function() {
		var active = $(this).data("index");
		sliderFade = $(this).data("index");

		if (!$("#banner .slider-home").find("[data-slide='" + active + "']").hasClass("active")) {
			$("#banner .slider-home").find(".active").removeClass("active").fadeOut(850);
			$("#banner .slider-home").find("[data-slide='" + active + "']").addClass("active").fadeIn(800);
		}
	});

	$("#unitys .main-unity .unity .unity-inner").mouseenter(function() {
		if ($(this).closest(".unity").hasClass("santos")) {
			$("#unitys .main-unity .unity.image .content .image-content.santos").each(function() {
				$(this).fadeIn(300);
			});
		} else {
			if ($(this).closest(".unity").hasClass("santo-andre")) {
				$("#unitys .main-unity .unity.image .content .image-content.santo-andre").each(function() {
					$(this).fadeIn(300);
				});
			}
		}
	}).mouseleave(function() {
		if ($(this).closest(".unity").hasClass("santos")) {
			$("#unitys .main-unity .unity.image .content .image-content.santos").each(function() {
				$(this).fadeOut(300)
			});
		} else {
			if ($(this).closest(".unity").hasClass("santo-andre")) {
				$("#unitys .main-unity .unity.image .content .image-content.santo-andre").each(function() {
					$(this).fadeOut(300)
				});
			}
		}
	});

	if (mq.matches) {
		$("#next .content").slick({
			infinite: false,
			slidesToShow: 2,
			slidesToScroll: 2,
			dots: false,
			arrows: true,
			prevArrow: '<span class="icons-arrow-left"></span>',
			nextArrow: '<span class="icons-arrow-right"></span>',
			responsive: [{
				breakpoint: 620,
				settings: {
					slidesToShow: 1,
					slidesToScroll: 1,
				}
			}],
		});

		$("#unitys .main-unity .unity.santo-andre .content").click(function() {
			window.location.href = BASE_URL + "unidades/santo-andre/"
		});

		$("#unitys .main-unity .unity.santos .content").click(function() {
			window.location.href = BASE_URL + "unidades/santos/"
		});
	}

	if (mobile.matches) {
		$("#parceiros .partners-list").slick({
			infinite: false,
			slidesToShow: 3,
			slidesToScroll: 3,
			dots: false,
			arrows: true,
			prevArrow: '<span class="icons-arrow-left"></span>',
			nextArrow: '<span class="icons-arrow-right"></span>',
			responsive: [{
				breakpoint: 640,
				settings: {
					slidesToShow: 2,
					slidesToScroll: 2,
				}
				}, {
				breakpoint: 480,
				settings: {
					slidesToShow: 1,
					slidesToScroll: 1,
				}
			}],
		});
	}

	$(window).resize(function() {
		if (mq.matches) {
			$("#unitys .main-unity .unity.santo-andre .content").click(function() {
				window.location.href = BASE_URL + "unidades/santo-andre/"
			});

			$("#unitys .main-unity .unity.santos .content").click(function() {
				window.location.href = BASE_URL + "unidades/santos/"
			});

			$("#next .content").slick({
				infinite: false,
				slidesToShow: 2,
				slidesToScroll: 2,
				dots: false,
				arrows: true,
				prevArrow: '<span class="icons-arrow-left"></span>',
				nextArrow: '<span class="icons-arrow-right"></span>',
				responsive: [{
					breakpoint: 620,
					settings: {
						slidesToShow: 1,
						slidesToScroll: 1,
					}
				}],
			});
		} else if (mq.matches) {
			$("#parceiros .partners-list").slick({
				infinite: false,
				slidesToShow: 3,
				slidesToScroll: 3,
				dots: false,
				arrows: true,
				prevArrow: '<span class="icons-arrow-left"></span>',
				nextArrow: '<span class="icons-arrow-right"></span>',
				responsive: [{
					breakpoint: 640,
					settings: {
						slidesToShow: 2,
						slidesToScroll: 2
					}
					}, {
					breakpoint: 480,
					settings: {
						slidesToShow: 1,
						slidesToScroll: 1
					}
				}]
			});
		}
	});

	var ttid = "esags";
	var response = $.getJSON("https://query.yahooapis.com/v1/public/yql?q=select%20content%20from%20html%20where%20url%3D%22https%3A%2F%2Ftwitter.com%2F" + ttid + "%22%20and%20xpath%3D'%2F%2Fli%5Bcontains(%40class%2C%22ProfileNav-item--followers%22)%5D%2Fa%2Fspan%5Bcontains(%40class%2C%22ProfileNav-value%22)%5D'&format=json&callback=");
	return response.success(function(followers) {
		$(".twitter_count").text(followers.query.results.span);
		var youtubeResponse = $.getJSON("https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20html%20where%20url%3D'https%3A%2F%2Fwww.youtube.com%2Fuser%2Ffaculdadeesags'%20and%20xpath%3D'%2Fhtml%2Fbody%2Fdiv%5B4%5D%2Fdiv%5B4%5D%2Fdiv%2Fdiv%5B5%5D%2Fdiv%2Fdiv%5B1%5D%2Fdiv%2Fdiv%5B2%5D%2Fdiv%2Fdiv%2Fdiv%5B2%5D%2Fdiv%2Fspan%2Fspan%5B1%5D'&format=json&callback=");
		return youtubeResponse.success(function(subscriptions) {
			$(".youtube_count").text(subscriptions.query.results.span.title)
		});
	});
}).call(this);