(function($){$.fn.cms_filter_tags2=function(opcoes){return this.each(function(i,v){if(!opcoes.options)return;var onclick_tags=opcoes.onclick_tags;var onclick_list=opcoes.onclick_list;var css='<style type="text/css">';var mobile_size=parseInt(opcoes.mobile_size)>0?parseInt(opcoes.mobile_size):767;var tag_color=opcoes.tag_color&&opcoes.tag_color.length>0?opcoes.tag_color:'#000';var tag_text_color=opcoes.tag_text_color&&opcoes.tag_text_color.length>0?opcoes.tag_text_color:'#000';var tag_text_color_hover=opcoes.tag_text_color_hover&&opcoes.tag_text_color_hover.length>0?opcoes.tag_text_color_hover:'#fff';var placeholder=opcoes.placeholder.length>0?opcoes.placeholder:'';$.each(opcoes.options,function(k,v){var style='';var style_hover='';if(v.tag_color){style+='border-color: '+v.tag_color+'; ';style+='color: '+v.tag_color+'; ';style+='background-color: transparent;';}if(style.length>0){css+='.filter_tag[data-value="'+v.value+'"] {'+style+'}';css+='.options li[data-value="'+v.value+'"] .list-courses-modality {'+style+'}';}});css+='.filter-container {display: block; width: 100%; clear: both; position: relative; margin-top: 30px; float: left;}';css+='.filter_tag {display: block; margin: 5px 10px 10px 0; float: left; color: '+tag_text_color+'; border: 1px solid '+tag_color+'; padding: 3px 15px; border-radius: 20px; -moz-border-radius: 20px; transition: 0.4s ease all; cursor: pointer;}';css+='.filter_tag .remove {display: none;}';css+='.filter_tag.active .remove {display: none;}';css+='.filter_tag.active {display: block;}';css+='.filter_tag.active .remove {display: inline-block;}';css+='.tags { display: inline-block;}';css+='.tags { padding: 0px 0; float: left; width: 100%; }';css+='.select {display: block; position: relative; width: 100%; height: 40px; border: 1px solid #dedede; border-radius: 25px;  cursor: pointer; float: left; }';css+='.select:before {content: "\\e80f"; position: absolute; right: 5px; top: 1px; font-family: "fontello"; font-size: 40px; line-height: 40px; color: #aeadad;}';css+='.select .options {display: none;}';css+='.select li.active {display: none;}';css+='.select.active {display: block !important;}';css+='.select.active .options {display:block; background-color: #fff; border: 1px solid #dedede; position: absolute; top: 40px; z-index: 10; width: 100%; max-height: 50vh; overflow: auto;}';css+='.select.active li {padding-left: 20px; font-size: 18px; line-height: 37px;}';css+='.select.active li:hover {background-color: #dedede;}';css+='.select li.active {display: none;}';css+='.placeholder {position: absolute; top: 0; right: 0; bottom: 0; left: 0; color: #aeadad; font-size: 18px; line-height: 35px; margin: 0 40px 0 20px; padding: 6px 0px;}';css+='.empty {display: none; color: #aeadad; font-size: 18px; line-height: 35px; margin: 0 40px 0 20px; }';css+='.empty.active {display: block;}';css+='.cms_filter_more {border: 1px solid #b4b4b4; float:left; padding: 6px 15px; width: 100%; border-radius: 20px; -moz-border-radius: 20px; outline: none; transition: border 0.4s ease; -moz-transition: border 0.4s ease; -webkit-transition: border 0.4s ease;}';css+='.cms_filter_more:focus {border: 1px solid #0092e7;}';css+='.cms_filter_more::before {content: \''+placeholder+'\'; opacity: 0.5; }';css+='.cms_filter_more:focus::before {content: \'\'; }';css+='.cms_filter_more.min {border-color: transparent; padding: 10px 10px; width: 160px; }';css+='.cms_filter_more.min::before {content: \'Adicionar ...\'; opacity: 0.5; }';css+='.cms_filter_more.min:focus::before {content: \'\'; }';css+='.cms_filter_more.min:focus { border-bottom: 1px solid #0092e7; border-radius: 0px; -moz-border-radius: 0px;}';css+='.cms_filter_more { display:block; height: 40px;}';css+='.select { display: none; }';css+='.placeholder { display: none; }';css+='.filter_tag { display: none; }';css+='.cms_filter_more.min { border-color: #b4b4b4; padding: 6px 15px; width: 100%; }';css+='.cms_filter_more.min:focus {border: 1px solid #0092e7; border-radius: 20px; -moz-border-radius: 20px; }';css+='.select.active { height: 0px; border: none; }';css+='</style>';$(this).append(css);var placeholder=opcoes.placeholder.length>0?opcoes.placeholder:'';var empty=opcoes.empty.length>0?opcoes.empty:'';var html='<div class="filter-container clearfix">';html+='   <div class="select">';html+='   <div class="placeholder text-size-4">'+placeholder+'</div>';html+='      <div class="options">';html+='         <div class="empty">'+empty+'</div>';html+='         <ul>';$.each(opcoes.options,function(k,v){html+='            <li data-value="'+v.value+'">'+v.title+'</li>';});html+='         </ul>';html+='      </div>';html+='   </div>';html+='   <div class="cms_filter_more text-size-4" contenteditable="true"></div>';html+='   <div class="tags">';$.each(opcoes.options,function(k,v){html+='   <div class="filter_tag" data-value="'+v.value+'">'+v.title+'<i class="remove icon-cancel-1"></i></div>';});html+='   </div>';html+='</div>';$(this).append(html);var main=$(this);var select=$(this).find('.select');var placeholder=$(this).find('.select .placeholder');var empty=$(this).find('.select .empty');var items_li=$(this).find('.select li');var tags=$(this).find('.tags');var items_tags=$(this).find('.tags div');select.click(function(){select.toggleClass('active');});items_li.click(function(){$(this).addClass('active');tags.find('[data-value="'+$(this).data('value')+'"]').prependTo(tags).addClass('active');$('.cms_filter_more').html('');$('.cms_filter_more').addClass('min');verify_empty();if(jQuery.isFunction(opcoes.onclick_list)){opcoes.onclick_list($(this));}});items_tags.click(function(){$(this).toggleClass('marked');if($(this).hasClass('active')){main.find('.select li[data-value="'+$(this).data('value')+'"]').removeClass('active');}else{main.find('.select li[data-value="'+$(this).data('value')+'"]').addClass('active');}$(this).toggleClass('active');if(jQuery.isFunction(opcoes.onclick_tags)){opcoes.onclick_tags($(this));}verify_empty();});function verify_empty(){if(items_li.filter('*:not(.active)').length<1){empty.addClass('active');}else{empty.removeClass('active');}}function filtro(busca){var regex=/(&nbsp;|<([^>]+)>)/ig
busca=busca.replace(regex,"");console.log('Busca'+busca);if(busca.length!=0){$('.select').addClass('active');$('.options ul li').css('display','none');$('.options ul li').each(function(index,element){var el=$(element).attr('data-value');var filtro=new RegExp(busca,'gi');var match=el.match(filtro);if((match&&match.length>0)){$(element).css('display','block');}});}else{$('#list-courses').css('height','0px');}}$('.cms_filter_more').on('keyup touchend',function(){filtro($('.cms_filter_more').html());});});}})(jQuery);